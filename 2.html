<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>123</title>
    <link rel="stylesheet" href="s.css">
</head>

<body>

<div id="itemList"></div>
<p id="totalCost">Total Cost: 0</p>
<script>
    let items = [
        {name: "StarLine Экзотические Фрукты", quantity: 3, price: 350, incart: 0},
        {name: "StarLine Черничный Чизкейк", quantity: 12, price: 350, incart: 0},
        {name: "StarLine Экзотические Фрукты", quantity: 3, price: 350, incart: 0},
        {name: "StarLine Черничный Чизкейк", quantity: 12, price: 350, incart: 0},
        {name: "StarLine Экзотические Фрукты", quantity: 3, price: 350, incart: 0},
        {name: "StarLine Черничный Чизкейк", quantity: 12, price: 350, incart: 0},
    ];

    let totalCost = document.getElementById("totalCost");

    function calculateTotalCost() {
        let cost = 0;
        for (let i = 0; i < items.length; i++) {
            let item = items[i];
            cost += item.incart * item.price;
        }
        totalCost.innerHTML = `Total Cost: ${cost}`;
    }

    function updateIncart(index, value) {
        items[index].incart = Number(value);
        console.log(items)
        calculateTotalCost();
    }

    window.onload = function () {
        let itemList = document.getElementById("itemList");

        for (let i = 0; i < items.length; i++) {
            let item = items[i];
            let listItem = document.createElement("div");
            listItem.innerHTML = `
                                ${item.name} ${item.quantity}шт ${item.price}THB
                                <div class="number-input">
                                  <button onclick="this.parentNode.querySelector('input[type=number]').stepDown(); this.parentNode.querySelector('input[type=number]').dispatchEvent(new Event('change'))" ></button>
                                  <input class="quantity" name="quantity" type="number" min="0" max="${item.quantity}" value="${item.incart}" onchange="updateIncart(${i}, this.value)">
                                  <button onclick="this.parentNode.querySelector('input[type=number]').stepUp(); this.parentNode.querySelector('input[type=number]').dispatchEvent(new Event('change'))" class="plus"></button>
                                </div>
                              `;
            itemList.appendChild(listItem);
        }
    };
</script>
</body>
</html>
